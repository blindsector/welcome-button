<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>–£–ª–∏—á–µ–Ω –ö–∞–º—É—Ñ–ª–∞–∂ –ß–∞—Ç</title>
<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#141e30,#243b55);
  color:white;
}
.container{display:flex;gap:20px;padding:20px}
.box{
  flex:1;
  background:rgba(255,255,255,0.07);
  padding:15px;
  border-radius:15px;
}
textarea,input{
  width:100%;margin-top:10px;padding:10px;
  border-radius:10px;border:none;font-size:15px;
}
button{
  margin-top:10px;padding:12px;border:none;
  border-radius:10px;background:#ff5e57;color:white;
  font-size:16px;cursor:pointer;
}
.chat{
  background:white;color:black;height:140px;
  overflow:auto;border-radius:10px;padding:10px;margin-top:10px;
}
</style>
</head>
<body>

<div class="container">
  <div class="box">
    <h2>üß† –ù–æ—Ä–º–∞–ª–µ–Ω —Ç–µ–∫—Å—Ç</h2>
    <div id="chatNormal" class="chat"></div>
    <textarea id="inputText" placeholder="–ü–∏—à–∏ –Ω–æ—Ä–º–∞–ª–Ω–æ..."></textarea>
    <input type="text" id="secretKey" placeholder="–¢–∞–µ–Ω –∫–ª—é—á (–ø–æ –∂–µ–ª–∞–Ω–∏–µ)">
    <button onclick="encodeText()">–ö–æ–¥–∏—Ä–∞–π ‚ûú</button>
  </div>

  <div class="box">
    <h2>üï∂ –ö–æ–¥–∏—Ä–∞–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ</h2>
    <div id="chatEncoded" class="chat"></div>

    <h2>üì• –ü–æ—Å—Ç–∞–≤–∏ –∫–æ–¥–∏—Ä–∞–Ω–∏—è –æ—Ç–≥–æ–≤–æ—Ä</h2>
    <textarea id="replyText"></textarea>
    <button onclick="decodeText()">–†–∞–∑–∫–æ–¥–∏—Ä–∞–π ‚¨á</button>

    <h2>üí¨ –†–∞–∑–∫–æ–¥–∏—Ä–∞–Ω–æ</h2>
    <div id="chatDecoded" class="chat"></div>
  </div>
</div>

<script>
/* ========= –ì–û–õ–Ø–ú –†–ï–ß–ù–ò–ö ========= */
/* –í—Å—è–∫–∞ –¥—É–º–∞ –∏–º–∞ –ú–ê–°–ò–í –æ—Ç –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª–∏ */

let dictionary = {
"–¥–∞":["–ø–ª—è—Å","—Å—Ç–∞–≤–∞","–æ–∫–µ–π","—è—Å–Ω–æ","–∞–π–¥–µ"],
"–Ω–µ":["–π–æ–∫","–Ω—è–º–∞","–ø–∞—Å","–≥—Ä–µ–¥–∞"],
"–ø–∞—Ä–∏":["–±–∞–Ω–∏—Ü–∏","–∫–∏–Ω—Ç–∏","—Å–∞–ª—Ñ–µ—Ç–∫–∏","—Ç—É—Ö–ª–∏","—Ö–∞—Ä—Ç–∏–π–∫–∏"],
"–ø–æ–ª–∏—Ü–∏—è":["–≥–æ—Å—Ç–∏","—Å–∏–Ω–∏—Ç–µ","–∫–æ–º—à–∏–∏—Ç–µ","–ø—É–±–ª–∏–∫–∞—Ç–∞"],
"–æ–ø–∞—Å–Ω–æ":["—Ç—ä–Ω–∫–æ","–ª—é—Ç–æ","–∂–µ–≥–∞","—Ö–ª—ä–∑–≥–∞–≤–æ"],
"—Å—Ä–µ—â–∞":["–∫–∞—Ñ–µ","—Ä–∞–∑–¥—É–º–∫–∞","—Å–µ–∞–Ω—Å","—Ä–∞–∑—Ö–æ–¥–∫–∞"],
"–º—è—Å—Ç–æ":["–ø–æ–ª—è–Ω–∫–∞","—Ç–æ—á–∫–∞","—Å—Ü–µ–Ω–∞—Ç–∞","–∞–¥—Ä–µ—Å—á–µ"],
"—Ç—É–∫":["—Ç—É–∫–∞","–Ω–∞—Å–∞–º","—É –Ω–∞—Å"],
"—Ç–∞–º":["—Ç–∞–º–∫–∞","–Ω–∞—Ç–∞–º","—É —Ç—è—Ö"],
"–æ—Ç–∏–≤–∞–º":["–º—è—Ç–∞–º —Å–µ","–∑–∞–º–∏–Ω–∞–≤–∞–º","–æ—Ç–ª–µ–ø—è–º —Å–µ"],
"–∏–¥–≤–∞–º":["–¥–æ—Ç—ä—Ç—Ä—è–º —Å–µ","–¥–æ–∫–ª–∞—Ç—è —Å–µ","–ø–æ—è–≤—è–≤–∞–º —Å–µ"],
"—á–∞–∫–∞–π":["–∑–∞–¥—Ä—ä–∂","—è –ø–æ—á–∞–∫–∞–π","—Å–ø—Ä–∏ –º–∞–ª–∫–æ"],
"–±—ä—Ä–∑–æ":["–Ω–∞ –±—ä—Ä–∑–∞","–µ–∫—Å–ø—Ä–µ—Å","–Ω–∞ –ø–æ–∂–∞—Ä"],
"–±–∞–≤–Ωo":["–ø–æ–ª–µ–∫–∞","–∞–π–ª—è—à–∫–æ"],
"–ø—Ä–∏—è—Ç–µ–ª":["–º–æ–π —á–æ–≤–µ–∫","–±—Ä–∞—Ç","–∫–æ–º—à–∏—è","—á–æ–≤–µ–∫"],
"–∂–µ–Ω–∞":["–º–∞—Ü–∫–∞","–≥–æ—Å–ø–æ–∂–∞—Ç–∞","—Ç–∞—è"],
"–º—ä–∂":["–ø–∏—á–∞","–æ–Ω—è","–±–∞—Ç–∫–∞—Ç–∞"],
"–∫–æ–ª–∞":["–±—Ä—ä–º—á–∞–ª–æ—Ç–æ","–∫–æ—à–Ω–∏—Ü–∞—Ç–∞","–∫–∞—Ä—É—Ü–∞—Ç–∞"],
"—Ç–µ–ª–µ—Ñ–æ–Ω":["–∂—É–∂–∫–∞—Ç–∞","—Å–ª—É—à–∞–ª–∫–∞—Ç–∞","–∑–≤—ä–Ω–∞—Ä–∫–∞—Ç–∞"],
"–≥–æ–≤–æ—Ä–∏–º":["–ª–∞—Ñ–∏–º","–±—ä–±—Ä–∏–º","—Ä–∞–∑–ø—Ä–∞–≤—è–º–µ"],
"–ø—Ä–æ–±–ª–µ–º":["–¥—Ä–∞–º–∞","—Ñ–∏–ª–º","—Å–∏—Ç—É–∞—Ü–∏—è"],
"–¥–æ–±—Ä–µ":["–±–µ—Ç–æ–Ω","—à–µ—Å—Ç","—Ç–æ–ø"],
"–ª–æ—à–æ":["–∑–ª–µ","–∫—Ä–∏–≤–æ","—Ç–µ–∂–∫–æ"],
"—Ç–∞–π–Ω–∞":["–º–∞–π–Ω–∞","—Ç–∏—à–∏–Ω–∞","—Å—è–Ω–∫–∞"],
"–¥–Ω–µ—Å":["–¥–Ω–µ—Å–∫–∞","–¥–Ω–µ—Å—á–∏—Ü–∞"],
"—É—Ç—Ä–µ":["—É—Ç—Ä–µ–∫–∞","—É—Ç—Ä–µ –≤–µ—á–µ—Ä"],
"–≤—á–µ—Ä–∞":["–≤—á–µ—Ä–∞–∫–∞","–æ–Ω–∑–∏ –¥–µ–Ω"],
"—Ä–∞–±–æ—Ç–∞":["–¥–∞–ª–∞–≤–µ—Ä–∞","–∑–∞–¥–∞—á–∫–∞","–∏–≥—Ä–∞—Ç–∞"],
"–ø–ª–∞–Ω":["—Å—Ö–µ–º–∞","—Ñ–∏–ª–º","–Ω–æ–º–µ—Ä"],
"–∏—Å–∫–∞–º":["–∂–µ–ª–∞—è","–º–µ—Ä–∞–∫ –º–∏ –µ","–Ω–∞ –º–µ—Ä–∞–∫ —Å—ä–º"],
"—Ç—Ä—è–±–≤–∞":["–Ω–∞–ª–∞–≥–∞ —Å–µ","—Ä–µ–¥–Ω–æ –µ","—â–µ —Ç—Ä—è–±–≤–∞"],
"–≤–∑–µ–º–∏":["–≥—Ä–∞–±–Ω–∏","–ª–∞–ø–Ω–∏","–ø—Ä–∏–±–µ—Ä–∏"],
"–¥–æ–Ω–µ—Å–∏":["–¥–æ—Ç—ä—Ç—Ä–∏","–≤–ª–∞—á–∏","–¥–æ–º—ä–∫–Ω–∏"],
"–æ—Å—Ç–∞–≤–∏":["–∑–∞—Ä–µ–∂–∏","–º–µ—Ç–Ω–∏","—Ö–≤—ä—Ä–ª–∏"],
"—Ç—Ä—ä–≥–≤–∞–º":["–æ—Ç–ª–µ–ø—è–º","–∏–∑—á–µ–∑–≤–∞–º","–ø–∞–ª–≤–∞–º"],
"–≥–æ—Ç–æ–≤–æ":["–æ–ø—Ä–∞–≤–µ–Ω–æ","—à–µ—Å—Ç","—É—Ä–µ–¥–µ–Ω–æ"],
"–∫—Ä–∞–π":["—Ñ–∏–Ω–∞–ª","–∞–π–¥–µ —Å—Ç–∏–≥–∞","–¥–æ —Ç–∞–º"],
"–≤–∏–∂":["–∑–∏—Ä–Ω–∏","—Ö–≤—ä—Ä–ª–∏ –æ–∫–æ","–ø–æ–≥–ª–µ–¥–Ω–∏"],
"–≥–ª–µ–¥–∞–π":["–Ω–∞–±–ª—é–¥–∞–≤–∞–π","–∑–∏—Ä–∫–∞–π"],
"–≤—Ö–æ–¥":["–≤—Ä–∞—Ç–∞","–¥—É–ø–∫–∞","–ø—Ä–æ—Ö–æ–¥"],
"–∏–∑—Ö–æ–¥":["–±–µ–≥–∞—á–∫–∞—Ç–∞","–∏–∑—Ö–æ–¥–∞","–±—è–≥—Å—Ç–≤–æ—Ç–æ"]
};

/* ========= –¢–ê–ï–ù –ö–õ–Æ–ß ========= */
function applyKey(key){
  if(!key) return;
  let seed=0;
  for(let c of key) seed+=c.charCodeAt(0);
  Math.seed = seed;
}

/* ========= –ò–ó–ë–û–† –ù–ê –°–õ–£–ß–ê–ô–ù–ê –î–£–ú–ê ========= */
function randomChoice(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}

/* ========= –ö–û–î–ò–†–ê–ù–ï ========= */
function encodeText(){
  let text=document.getElementById("inputText").value.toLowerCase();
  let key=document.getElementById("secretKey").value;
  applyKey(key);

  let words=text.split(" ");
  let encoded=words.map(w=>{
    let clean=w.replace(/[.,!?]/g,"");
    if(dictionary[clean] && Math.random()<0.6){
      return randomChoice(dictionary[clean]);
    }
    return w;
  }).join(" ");

  document.getElementById("chatNormal").innerHTML+="<b>–¢–∏:</b> "+text+"<br>";
  document.getElementById("chatEncoded").innerHTML+="üï∂ "+encoded+"<br>";
  saveHistory();
}

/* ========= –†–ê–ó–ö–û–î–ò–†–ê–ù–ï ========= */
function decodeText(){
  let text=document.getElementById("replyText").value.toLowerCase();
  let reverse={};
  for(let key in dictionary){
    dictionary[key].forEach(v=>reverse[v]=key);
  }

  let words=text.split(" ");
  let decoded=words.map(w=>reverse[w]||w).join(" ");
  document.getElementById("chatDecoded").innerHTML+="ü§ñ "+decoded+"<br>";
}

/* ========= –ò–°–¢–û–†–ò–Ø ========= */
function saveHistory(){
  localStorage.setItem("normalHistory",document.getElementById("chatNormal").innerHTML);
  localStorage.setItem("encodedHistory",document.getElementById("chatEncoded").innerHTML);
}
function loadHistory(){
  if(localStorage.getItem("normalHistory"))
    document.getElementById("chatNormal").innerHTML=localStorage.getItem("normalHistory");
  if(localStorage.getItem("encodedHistory"))
    document.getElementById("chatEncoded").innerHTML=localStorage.getItem("encodedHistory");
}
window.onload=loadHistory;
</script>

</body>
</html>
