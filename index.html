<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>–¢–∞–µ–Ω –ß–∞—Ç v2</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #00c6ff, #0072ff);
    color: white;
}

.container {
    display: flex;
    gap: 20px;
    padding: 20px;
}

.panel {
    flex: 1;
    background: rgba(255,255,255,0.08);
    padding: 15px;
    border-radius: 15px;
    backdrop-filter: blur(10px);
    display: flex;
    flex-direction: column;
}

h2 {
    margin-top: 0;
}

.chatbox {
    flex: 1;
    background: white;
    color: black;
    padding: 10px;
    border-radius: 10px;
    overflow-y: auto;
    margin-bottom: 10px;
    font-family: monospace;
}

textarea, select {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: none;
    margin-bottom: 10px;
    font-size: 14px;
}

button {
    padding: 10px;
    border-radius: 8px;
    border: none;
    background: #ff4d4d;
    color: white;
    font-weight: bold;
    cursor: pointer;
    margin-bottom: 5px;
}

button:hover {
    background: #ff1a1a;
}
</style>
</head>
<body>

<div class="container">

    <!-- –õ–Ø–í–û -->
    <div class="panel">
        <h2>üß† –¢–∏ –ø–∏—à–µ—à –Ω–æ—Ä–º–∞–ª–Ω–æ</h2>
        <div id="myChat" class="chatbox"></div>

        <textarea id="inputText" placeholder="–ù–∞–ø–∏—à–∏ —Å—ä–æ–±—â–µ–Ω–∏–µ..."></textarea>

        <select id="modeSelect">
            <option value="garaga">–ì–∞—Ä–≥–∞ —Ä–µ–∂–∏–º</option>
            <option value="shadow">–°—è–Ω–∫–∞ —Ä–µ–∂–∏–º</option>
        </select>

        <button onclick="sendMessage()">–ò–∑–ø—Ä–∞—Ç–∏ ‚ûú</button>
        <button onclick="clearChat()">üóë –ò–∑—á–∏—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏—è</button>
    </div>

    <!-- –î–Ø–°–ù–û -->
    <div class="panel">
        <h2>üîê –ö–æ–¥–∏—Ä–∞–Ω —Ç–µ–∫—Å—Ç</h2>
        <div id="encodedChat" class="chatbox"></div>

        <button onclick="copyLast()">üìã –ö–æ–ø–∏—Ä–∞–π –ø–æ—Å–ª–µ–¥–Ω–æ—Ç–æ</button>

        <h2>üì• –ü–µ–π—Å—Ç–Ω–∏ –æ—Ç–≥–æ–≤–æ—Ä (–∫–æ–¥–∏—Ä–∞–Ω)</h2>
        <textarea id="replyInput" placeholder="–ü–µ–π—Å—Ç–Ω–∏ –∫–æ–¥–∏—Ä–∞–Ω–∏—è –æ—Ç–≥–æ–≤–æ—Ä..."></textarea>
        <button onclick="decodeReply()">–†–∞–∑–∫–æ–¥–∏—Ä–∞–π ‚¨á</button>

        <h2>üí¨ –†–∞–∑–∫–æ–¥–∏—Ä–∞–Ω–æ</h2>
        <div id="decodedChat" class="chatbox"></div>
    </div>

</div>

<script>
const dictionaries = {
    garaga: {
        "–∑–¥—Ä–∞–≤–µ–π":"–≥–ª—É–≤–µ–∫",
        "–∫–∞–∫":"—Ç—Ä–æ–º",
        "—Å–∏":"–≤–∞—Ä–¥",
        "–ø—Ä–∏—è—Ç–µ–ª":"–º—É—Ä–∫–∞",
        "–¥–∞":"—Ç—Ä–æ–ª–∞",
        "–Ω–µ":"–≤–∞–∫—Ä–∞",
        "–ø–ª–∞–Ω":"—Å—Ö–µ–º–æ—Ä–∞",
        "—á–∞—Ç":"–∫—Ä–∏–ø—Ç–æ—Ä",
        "—Ç–∞–π–Ω":"–≥–ª—É–≤–µ–∫",
        "—Å—ä–æ–±—â–µ–Ω–∏–µ":"–¥–µ–∫–ª–∞—Ä–∞"
    },
    shadow: {
        "–∑–¥—Ä–∞–≤–µ–π":"–Ω–æ–∫—Ç",
        "–∫–∞–∫":"—Å–≤–∏–ª",
        "—Å–∏":"–∂—Ä–∞–∫",
        "–ø—Ä–∏—è—Ç–µ–ª":"–º—Ä–∞–∫",
        "–¥–∞":"–∑–æ—Ä",
        "–Ω–µ":"–∫—Ä–∏–ø",
        "–ø–ª–∞–Ω":"—Å–µ–Ω–∫–∞",
        "—á–∞—Ç":"—Ç—É–Ω–µ–ª",
        "—Ç–∞–π–Ω":"–º—ä–≥–ª–∞",
        "—Å—ä–æ–±—â–µ–Ω–∏–µ":"–∫–æ–¥–µ–∫—Å"
    }
};

function encode(text, mode){
    let dict = dictionaries[mode];
    return text.split(" ").map(word => dict[word.toLowerCase()] || word).join(" ");
}

function decode(text, mode){
    let dict = dictionaries[mode];
    let reversed = Object.fromEntries(Object.entries(dict).map(([k,v])=>[v,k]));
    return text.split(" ").map(word => reversed[word.toLowerCase()] || word).join(" ");
}

function scrollToBottom(id){
    let el = document.getElementById(id);
    el.scrollTop = el.scrollHeight;
}

function saveHistory(){
    localStorage.setItem("myChat", myChat.innerHTML);
    localStorage.setItem("encodedChat", encodedChat.innerHTML);
    localStorage.setItem("decodedChat", decodedChat.innerHTML);
}

function loadHistory(){
    myChat.innerHTML = localStorage.getItem("myChat") || "";
    encodedChat.innerHTML = localStorage.getItem("encodedChat") || "";
    decodedChat.innerHTML = localStorage.getItem("decodedChat") || "";
}

function sendMessage(){
    let text = inputText.value.trim();
    if(!text) return;

    let mode = modeSelect.value;
    let encoded = encode(text, mode);

    myChat.innerHTML += "üßë: " + text + "<br>";
    encodedChat.innerHTML += "üîí: " + encoded + "<br>";

    inputText.value = "";

    scrollToBottom("myChat");
    scrollToBottom("encodedChat");
    saveHistory();
}

function decodeReply(){
    let text = replyInput.value.trim();
    if(!text) return;

    let mode = modeSelect.value;
    let decoded = decode(text, mode);

    decodedChat.innerHTML += "ü§ñ: " + decoded + "<br>";
    replyInput.value = "";

    scrollToBottom("decodedChat");
    saveHistory();
}

function copyLast(){
    let lines = encodedChat.innerText.trim().split("\n");
    navigator.clipboard.writeText(lines[lines.length-1].replace("üîí: ",""));
    alert("–ö–æ–ø–∏—Ä–∞–Ω–æ!");
}

function clearChat(){
    if(confirm("–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏?")){
        myChat.innerHTML = "";
        encodedChat.innerHTML = "";
        decodedChat.innerHTML = "";
        localStorage.clear();
    }
}

loadHistory();
</script>

</body>
</html>
