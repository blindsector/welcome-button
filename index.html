<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>–¢–∞–µ–Ω –ß–∞—Ç v3</title>
<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#00c6ff,#0072ff);
  color:white;
}
.container {
  display:flex;
  gap:20px;
  padding:20px;
}
.box {
  flex:1;
  background: rgba(255,255,255,0.1);
  padding:15px;
  border-radius:15px;
}
h2 { margin-top:0 }
textarea {
  width:100%;
  height:90px;
  border-radius:10px;
  border:none;
  padding:10px;
  font-size:16px;
  resize:none;
}
  <input type="text" id="secretKey" placeholder="–¢–∞–µ–Ω –∫–ª—é—á (–ø–æ –∂–µ–ª–∞–Ω–∏–µ)">

button {
  margin-top:10px;
  padding:12px;
  width:100%;
  border:none;
  border-radius:10px;
  background:#ff4757;
  color:white;
  font-size:16px;
  cursor:pointer;
}
.chatlog {
  background:white;
  color:black;
  height:150px;
  overflow:auto;
  border-radius:10px;
  padding:10px;
  margin-bottom:10px;
  font-family:monospace;
}
.small {
  font-size:12px;
  opacity:0.8;
}
</style>
</head>
<body>

<div class="container">

  <!-- –õ–Ø–í–û: –¢–ò -->
  <div class="box">
    <h2>üß† –¢–∏ –ø–∏—à–µ—à –Ω–æ—Ä–º–∞–ª–Ω–æ</h2>
    <div id="chatNormal" class="chatlog"></div>
    <textarea id="inputText" placeholder="–ù–∞–ø–∏—à–∏ —Å—ä–æ–±—â–µ–Ω–∏–µ..."></textarea>
    <button onclick="sendMessage()">–ò–∑–ø—Ä–∞—Ç–∏ ‚ûú</button>
  </div>

  <!-- –î–Ø–°–ù–û: –ö–û–î -->
  <div class="box">
    <h2>üîê –ö–æ–¥–∏—Ä–∞–Ω —Ç–µ–∫—Å—Ç</h2>
    <div id="chatEncoded" class="chatlog"></div>

    <h2>üì• –ü–µ–π—Å—Ç–Ω–∏ –æ—Ç–≥–æ–≤–æ—Ä (–∫–æ–¥–∏—Ä–∞–Ω)</h2>
    <textarea id="replyInput" placeholder="–ü–µ–π—Å—Ç–Ω–∏ –∫–æ–¥–∏—Ä–∞–Ω–∏—è –æ—Ç–≥–æ–≤–æ—Ä..."></textarea>
    <button onclick="decodeReply()">–†–∞–∑–∫–æ–¥–∏—Ä–∞–π ‚¨á</button>

    <h2>üí¨ –†–∞–∑–∫–æ–¥–∏—Ä–∞–Ω–æ</h2>
    <div id="chatDecoded" class="chatlog"></div>
  </div>

</div>

<script>
let baseDictionary = {
  "–∑–¥—Ä–∞–≤–µ–π":"–≥–ª—É–≤–µ–∫",
  "–∑–¥—Ä–∞—Å—Ç–∏":"–≥–ª–µ–≤—É–∫",
  "–∫–∞–∫":"—Ç—Ä–µ",
  "—Å–∏":"–º—É–ª—á–∞",
  "–¥–æ–±—Ä–µ":"—à–ª—è–ø–∫–æ",
  "–ø—Ä–∏—è—Ç–µ–ª":"–¥—Ä—É–∂–∫–æ",
  "–±—Ä–∞—Ç":"–±–∞—Ç–æ–Ω",
  "—á–æ–≤–µ–∫":"–∑–º—É—Ä",
  "—Ö–æ—Ä–∞":"–º—Ä–∞–≤–∫–∏",
  "–∂–µ–Ω–∞":"–∫–∞–∫–∞",
  "–º—ä–∂":"–±–∞—Ç–∫–∞",
  "–º–æ–º–∏—á–µ":"–ø–ª—é–≤–∫–∞",
  "–º–æ–º—á–µ":"–∂–º—É—Ä",
  "–¥–∞":"—Ç—Ä–æ–ª–∞",
  "–Ω–µ":"–±—Ä—É–º",
  "–º–æ–∂–µ":"–≤—Ä—ä—Ç",
  "—Ç—Ä—è–±–≤–∞":"–¥–∂–∞—Å—Ç–∞",
  "–∏—Å–∫–∞–º":"–º—ä–≥–ª–∞",
  "–æ—Ç–∏–≤–∞–º":"–∑—É—Ä—Ç—è",
  "–∏–¥–≤–∞–º":"–≤–∂–∂",
  "–≤–∏–∂":"–∫—Ä–∞–º",
  "–≤–∏–¥–∏–º":"–∫—Ä–∞–º—É–ª—è",
  "–≥–ª–µ–¥–∞–π":"–∑–∏—Ä",
  "—á–∞–∫–∞–π":"–º—Ä—ä–Ω",
  "–±—ä—Ä–∑–æ":"–¥–∂–∏–≥",
  "–±–∞–≤–Ω–æ":"—à–ª—è–ø",
  "–ø—Ä–æ–±–≤–∞–º–µ":"–∑–æ—Ä—Ç–µ–∫",
  "–ø–ª–∞–Ω":"–º—Ä—è–∫",
  "–∏–¥–µ—è":"—à—É—à–ª—è–∫",
  "—Ä–∞–±–æ—Ç–∞":"—á–æ–º–±–∞",
  "–∑–∞–¥–∞—á–∞":"—Ç—Ä—è—Å—ä–∫",
  "—Ç–∞–π–Ω–æ":"—à—É—à",
  "—Å–∫—Ä–∏—Ç–æ":"–º—ä–ª—á",
  "–≥–æ–≤–æ—Ä–∏–º":"–±—Ä—ä–º",
  "–ø–∏—Å–∞—Ö":"–¥—Ä–∞—Å",
  "–∫–∞–∑–∞—Ö":"–∂–≥—ä—Ç",
  "–ø–∞—Ä–∏":"—Ä–∏–±–∏",
  "–¥–æ–∫—É–º–µ–Ω—Ç":"—Ö–∞—Ä—Ç–∏–π",
  "—Å—Ä–µ—â–∞":"—Å–±–∏—Ä–∫–∞",
  "–º—è—Å—Ç–æ":"–¥—É–ø–∫–∞",
  "—Ç—É–∫":"—Ç—É–∫–∞",
  "—Ç–∞–º":"—Ç–∞–º–∫–∞",
  "–≥–æ—Ä–µ":"–≤—Ä—ä—Ü",
  "–¥–æ–ª—É":"–≥–ª—ä–±",
  "–≤—Ö–æ–¥":"–¥—É–ø",
  "–∏–∑—Ö–æ–¥":"–±–µ–≥",
  "–ø—Ä–æ–±–ª–µ–º":"—Ç—É–ª–±–∞",
  "–æ–ø–∞—Å–Ω–æ":"–∂—É–ª",
  "—Å–ø–æ–∫–æ–π–Ω–æ":"–º–µ–∫–∞",
  "—Å–∏–≥—É—Ä–Ω–æ":"–±–µ—Ç–æ–Ω",
  "–Ω–µ—Å–∏–≥—É—Ä–Ω–æ":"—Ö–ª—ä–∑",
  "—É—Ç—Ä–µ":"–≤—Ä—è–∫",
  "–¥–Ω–µ—Å":"–¥–Ω–µ—Å–∫–∞",
  "–≤—á–µ—Ä–∞":"–º–∏–Ω—É",
  "–ø–æ—Å–ª–µ":"—Å–µ—Ç–Ω–µ",
  "–≤–µ–¥–Ω–∞–≥–∞":"–¥–∂–∞—Å—Ç–∞",
  "–≥–æ—Ç–æ–≤–æ":"—á—É–∫",
  "–∫—Ä–∞–π":"—Ñ–∏–Ω—á",
  "–Ω–∞—á–∞–ª–æ":"—Å—Ç–∞—Ä",
  "–∫–Ω–∏–≥–∞":"–ª–∏—Å—Ç–∞–∫",
  "—Ç–µ—Ñ—Ç–µ—Ä":"–¥—Ä–∞—Å–∫",
  "–∫–ª—é—á":"–∑—ä–±",
  "–≤—Ä–∞—Ç–∞":"–¥—É–ø–∫–∞",
  "–º–∞–∑–µ":"–≥–ª—ä–±–∏–Ω–∞",
  "—Ä–∞–π–æ–Ω":"–æ–±–ª–∞–∫",
  "—É–ª–∏—Ü–∞":"–ø—ä—Ç–µ–∫",
  "–∫–æ–ª–∞":"–±—Ä—ä–º–∫–∞",
  "—Ç–µ–ª–µ—Ñ–æ–Ω":"–∂—É–∂–∫–∞",
  "—Å—ä–æ–±—â–µ–Ω–∏–µ":"–º—Ä—è–≤–∫–∞",
  "—á–∞—Ç":"–±—ä—Ä–±–æ—Ä",
  "–∫–æ–¥":"—à—É–º",
  "—Ç–∞–π–Ω–∞":"—à—É—à",
  "–∏—Å—Ç–∏–Ω–∞":"–±–µ—Ç–æ–Ω",
  "–ª—ä–∂–∞":"–ø—É—à–µ–∫"
};


let noiseWords = [
  "—à–ª—è–ø","–º—Ä—è–∫","–∑–æ—Ä—Ç","–±—É–º–∫–∞","—Ç—Ä—è—Å","–ø–ª—è—Å",
  "–≤–∂–∂","–ø–ª—å–æ–∫","–¥—Ä—ä–Ω","—Ñ—Å—Å—Å","–∂–∂–∂","—Ç—Ä—ä–∫",
  "–±–ª—è–º","—à—É–ø","–≤—Ä—è—Å","–≥—Ä—É—Ö","—Ç—ä—Ü","–ø—Ä–∞—Å",
  "—Å–∫—Ä—ä—Ü","—à—É—Ä","–±—Ä—É–º","—Ü—ä–∫","—Ñ—Ä—ä—Ü"
];
let stableWords = ["—Ç—Ä–æ–ª–∞","–±—Ä—É–º","–¥–∂–∞—Å—Ç–∞","—à—É—à","–±–µ—Ç–æ–Ω","–º–µ–∫–∞","—á—É–∫","—Ñ–∏–Ω—á"];


function shuffleWord(word){
  if(stableWords.includes(word)) return word;
  if(word.length < 4) return word;

  let arr = word.split('');
  for(let i = arr.length - 2; i > 1; i--){
    let j = Math.floor(Math.random() * (i - 1)) + 1;
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr.join('');
}



function addNoise(){
  return Math.random() < 0.3 ? noiseWords[Math.floor(Math.random()*noiseWords.length)] + " " : "";
}

function mutateDictionary(){
  for(let key in baseDictionary){
    if(Math.random() < 0.35){
      baseDictionary[key] = shuffleWord(baseDictionary[key]);
    }
  }
}


function encode(text){
  mutateDictionary(); // üß¨ –∂–∏–≤ —Ä–µ—á–Ω–∏–∫
  return text.split(" ").map(word=>{
    let clean = word.toLowerCase();
    if(baseDictionary[clean]){
      return addNoise() + shuffleWord(baseDictionary[clean]);
    }
    return shuffleWord(word);
  }).join(" ");
}

function decode(text){
  let reverse = {};
  for(let key in baseDictionary){
    reverse[baseDictionary[key]] = key;
  }

  return text.split(" ").map(word=>{
    let clean = word.toLowerCase();
    clean = clean.replace(/[^–∞-—è]/gi,"");
    if(reverse[clean]) return reverse[clean];
    return word;
  }).join(" ");
}

function sendMessage(){
  let input = document.getElementById("inputText");
  let normal = input.value;
  if(!normal.trim()) return;

  let encoded = encode(normal);

  document.getElementById("chatNormal").innerHTML += "üôÇ " + normal + "<br>";
  document.getElementById("chatEncoded").innerHTML += "üîê " + encoded + "<br>";

  input.value="";
}

function decodeReply(){
  let coded = document.getElementById("replyInput").value;
  let decoded = decode(coded);

  document.getElementById("chatDecoded").innerHTML += "ü§ñ " + decoded + "<br>";
  document.getElementById("replyInput").value="";
}
</script>

</body>
</html>
